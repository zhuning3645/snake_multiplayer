# 多人贪吃蛇游戏

这是一个使用 Node.js、Express、WebSocket 和 Redis 实现的多人在线贪吃蛇游戏。

## 特性

- **多人在线**: 多个玩家可以同时在一个房间内进行游戏。
- **实时同步**: 基于 WebSocket 实现游戏状态的实时同步。
- **准备大厅**: 玩家可以在游戏开始前进入准备大厅，选择准备或取消准备。
- **Redis 状态管理**: 游戏状态存储在 Redis 中，方便扩展和多实例部署。
- **排行榜**: 实时显示玩家分数排行榜。
- **碰撞检测**: 蛇与墙壁、自身以及其他蛇的碰撞检测。
- **食物生成**: 随机生成食物。

## 技术栈

- **后端**:
    - Node.js
    - Express.js: 用于提供静态文件服务。
    - `ws`: WebSocket 库，用于实时通信。
    - `ioredis`: Redis 客户端，用于存储游戏状态和发布/订阅消息。
- **前端**:
    - HTML5
    - CSS3
    - JavaScript (Canvas API): 游戏逻辑和渲染。

## 运行项目

### 1. 克隆仓库

```bash
git clone https://github.com/zhuning3645/snake_multiplayer.git
cd snake_Multiplayer
```

### 2. 安装依赖

```bash
npm install
```

### 3. 启动 Redis 服务器

请确保你的本地或远程环境已启动 Redis 服务器。

### 4. 启动游戏服务器

```bash
npm start
```

服务器默认运行在 `http://localhost:3000`。

### 5. 访问游戏

在浏览器中打开 `http://localhost:3000`，你可以打开多个浏览器标签页或使用不同的设备来模拟多个玩家。

## 游戏玩法

1. **进入游戏**: 访问游戏链接后，你将进入准备大厅。
2. **输入昵称**: （如果未来有此功能）
3. **准备**: 点击“准备”按钮，你的蛇将出现在游戏区域。
4. **控制**: 使用键盘方向键（↑↓←→）或 `W A S D` 控制蛇的移动方向。
5. **目标**: 吃掉食物，使蛇变长，获得更高的分数。
6. **死亡**: 撞到墙壁、自己的身体或其它蛇的身体会导致死亡。
7. **重新准备**: 死亡后，你可以再次点击“准备”按钮重新开始游戏。

## 游戏页面
1. **准备大厅页面**
![准备大厅页面](./assets/image_login.png)
2.**游玩页面**
![游玩页面](./assets/image_play2.png)
![游玩页面2](./assets/image_play.png)

## 文件结构

- `server.js`: 后端主文件，处理 WebSocket 连接、游戏逻辑和 Redis 交互。
- `redis.js`: Redis 客户端配置和连接。
- `public/`: 包含前端静态文件。
    - `public/index.html`: 游戏主页面。
    - `public/style.css`: 游戏样式。
    - `public/game.js`: 前端游戏逻辑，包括 Canvas 渲染、用户输入和 WebSocket 客户端。
- `package.json`: 项目依赖和脚本配置。
- `.gitignore`: Git 忽略文件配置。

## 待办事项/未来改进

- [ ] 玩家昵称输入功能。
- [ ] 多个游戏房间支持。
- [ ] 游戏结束后的统计和重玩机制。
- [ ] 优化碰撞检测算法。
- [ ] 增加游戏难度选项。
- [ ] 移动端适配。